import{c as h,u as g,r as a,j as e}from"./index-Doe4i1YD.js";const C=h("/clinical-notes")({component:x});function x(){const{formData:c}=g(),[o,n]=a.useState(""),[l,d]=a.useState(!1),[r,p]=a.useState(""),[s,i]=a.useState(!1);a.useEffect(()=>{let t=!1;return(async()=>{d(!0),p(""),n(""),i(!1);try{const m=await fetch("https://scipp.onrender.com/api/generate-note",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful clinical documentation assistant."},{role:"user",content:`
You are a clinical documentation assistant. Write a clear, professional clinical note that summarizes all the provided patient data in full sentences and paragraphs. Do not use SOAP or any specific template—just present all the information in a logical, readable way.

Patient Data:
${JSON.stringify(c,null,2)}

Clinical Note:
              `}],max_tokens:400,temperature:.3})});if(!m.ok)throw new Error("Failed to generate note");const u=await m.json();t||n(u.choices[0].message.content.trim())}catch{t||p("Error generating note. Please try again.")}finally{t||d(!1)}})(),()=>{t=!0}},[c]);const f=()=>{o&&(navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3))};return e.jsx("div",{className:"card-container",children:e.jsxs("div",{className:"card",children:[e.jsx("header",{className:"card-header",children:e.jsx("h1",{children:"SCiPP Chest Pain Pathway"})}),e.jsxs("div",{className:"card-section",children:[l&&e.jsx("div",{style:{color:"#7B2CBF",marginBottom:16},children:"Generating clinical note…"}),r&&e.jsx("div",{style:{color:"#d32f2f",marginBottom:16},children:r}),o&&!l&&!r&&e.jsxs(e.Fragment,{children:[e.jsx("textarea",{value:o,onChange:t=>n(t.target.value),style:{background:"#f8f4ff",borderRadius:12,padding:24,fontFamily:"monospace, monospace",color:"#222",boxShadow:"0 2px 8px #7B2CBF11",marginTop:12,width:"100%",minHeight:220,fontSize:"1.08rem",border:"1.5px solid #e0d4ff",resize:"vertical",outline:"none",whiteSpace:"pre-wrap"}}),e.jsx("button",{className:"card-button card-hover",style:{marginTop:16,background:s?"#7B2CBF":void 0,color:s?"#fff":void 0,maxWidth:200},onClick:f,children:s?"Copied!":"Copy to Clipboard"})]})]})]})})}export{C as Route};
